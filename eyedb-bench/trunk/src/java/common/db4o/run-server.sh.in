#!/bin/bash
DB4O_JAR=@DB4O_JAR@
JAVA=@JAVA@

set -e

start_server() {
    CLASSPATH=.:$DB4O_JAR
    CLASSPATH=$CLASSPATH $JAVA Db4oServer db4o.server.properties &
    echo $! > server.pid
}

stop_server() {
    if test -f server.pid; then
	kill -1 `cat server.pid`
	rm -f server.pid
    else
	echo 'No server PID file, cannot stop server'
    fi
}

case $1 in
start)
	start_server;;
stop)
	stop_server;;
*)
	echo "usage: `basename $0` [start|stop]"
	exit 1
esac

