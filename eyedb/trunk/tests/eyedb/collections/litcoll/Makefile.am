## ########################################
## Begin template part

# replace by the list of all the binaries you want to build
noinst_PROGRAMS=colltest colltestlit

# for each binary listed in noinst_bin_PROGRAMS, add:
# <<binary_name>>_SOURCES= with the list of all the sources of this binary
colltest_SOURCES=colltest.cc 
colltestlit_SOURCES=colltestlit.cc 

# for each binary listed in noinst_bin_PROGRAMS, add:
# <<binary_name>>_LDADD= with the list of all the objects and libraries needed by the binary
colltest_LDADD= schema.o $(EYEDBLIBS)
colltestlit_LDADD= schema.o $(EYEDBLIBS)

# add the list of all .h that are generated by odl
BUILT_SOURCES= schema.h

## End template part
## ########################################


## ########################################
## Begin common part

# The last directory is needed for endian.h, which is generated by configure.in
INCLUDES=-I$(top_srcdir)/src -I$(top_srcdir)/include -I$(top_builddir)/include

EYEDBLIBS=$(top_builddir)/src/eyedb/libeyedb.la $(top_builddir)/src/eyedbsm/libeyedbsm.la  $(top_builddir)/src/lib/libeyedbrpcfe.la $(top_builddir)/src/lib/libeyedbutils.la @EYEDB_SYSLIBS@

LDADD= $(EYEDBLIBS)

EYEDBODL_exe=$(bindir)/eyedbodl
EYEDBODL_CC = $(EYEDBODL_exe) --gencode=C++
EYEDBODLFLAGS= 

# By default we use the file name as the package name. May be this is wrong?
%.cc %.h : %.odl
	$(EYEDBODL_CC) $(EYEDBODLFLAGS) --package=$* $<

## Begin common part
## ########################################
